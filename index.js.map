{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\nimport axios from 'axios';\n\n// const API_KEY = `50248807-4593db0d9cec2666d46b99efe`;\n// // axios.defaults.baseURL = 'https://pixabay.com/api/';\n\n// export const getImagesByQuery = async (query, page) => {\n//     try {\n//         const responce = await axios.get(`https://pixabay.com/api/`, {\n//             params: {\n//                 key: API_KEY,\n//                 q: query,\n//                 page: page,\n//                 per_page: 15,\n//                 image_type: `photo`,\n//                 orientation: `horizontal`,\n//             },\n//         });\n\n//         return responce.data.hits; // Повертаємо масив з зображеннями\n//     } catch (error) {\n//         console.error(`Error fetching images:`, error);\n\n//     }\n// };\n\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '50248807-4593db0d9cec2666d46b99efe';\n\nexport async function getImagesByQuery(query, page = 1, perPage = 15) {\n    const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n\n    const response = await fetch(url);\n    if (!response.ok) {\n        throw new Error(`HTTP error! Status: ${response.status}`);\n    }\n\n    return await response.json();\n}\n\n","\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n\nconst galleryEl = document.querySelector('.js-gallery');\n\nconst lightbox = new SimpleLightbox('.js-gallery .gallery-link', {\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n\nexport function createGallery(images) {\n    const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) =>\n        `<li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${largeImageURL}\">\n        <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n      </a>\n      <div class=\"image-info\">\n        <p>Likes: <span>${likes}</span></p>\n        <p>Views: <span>${views}</span></p>\n        <p>Comments: <span>${comments}</span></p>\n        <p>Downloads: <span>${downloads}</span></p>\n      </div>\n    </li>`\n    ).join('');\n\n    galleryEl.insertAdjacentHTML('beforeend', markup);\n    lightbox.refresh();\n}\n\nexport function clearGallery() {\n    galleryEl.innerHTML = '';\n}\n\nexport function showLoader(element) {\n    element.classList.remove('hidden');\n}\n\nexport function hideLoader(element) {\n    element.classList.add('hidden');\n}\n\nexport function showLoadMoreButton(button) {\n    button.classList.remove('hidden');\n}\n\nexport function hideLoadMoreButton(button) {\n    button.classList.add('hidden');\n}\n\n\n\n\n","\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getImagesByQuery } from './js/pixabay-api.js';\nimport {\n    createGallery,\n    clearGallery,\n    showLoader,\n    hideLoader,\n    showLoadMoreButton,\n    hideLoadMoreButton,\n} from './js/render-functions.js';\n\nconst formEl = document.querySelector('.js-form');\nconst loaderEl = document.querySelector('.js-loader');\nconst galleryEl = document.querySelector('.js-gallery');\nconst loadMoreBtn = document.querySelector('#load-more-button');\n\nlet query = '';\nlet page = 1;\nconst perPage = 15;\n\nformEl.addEventListener('submit', onFormSubmit);\nloadMoreBtn.addEventListener('click', onLoadMoreClick);\n\nasync function onFormSubmit(event) {\n    event.preventDefault();\n    query = event.target.elements['search-text'].value.trim();\n    page = 1;\n\n    if (!query) {\n        iziToast.warning({\n            message: 'Please enter a search term!',\n            position: 'topRight',\n        });\n        return;\n    }\n\n    clearGallery();\n    hideLoadMoreButton(loadMoreBtn);\n    showLoader(loaderEl);\n\n    try {\n        const data = await getImagesByQuery(query, page, perPage);\n\n        if (data.hits.length === 0) {\n            iziToast.info({\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight',\n            });\n            return;\n        }\n\n        createGallery(data.hits);\n\n        if (data.totalHits > page * perPage) {\n            showLoadMoreButton(loadMoreBtn);\n        }\n    } catch (error) {\n        iziToast.error({\n            message: `Error: ${error.message}`,\n            position: 'topRight',\n        });\n    } finally {\n        hideLoader(loaderEl);\n        formEl.reset();\n    }\n}\n\nasync function onLoadMoreClick() {\n    page += 1;\n    showLoader(loaderEl);\n\n    try {\n        const data = await getImagesByQuery(query, page, perPage);\n        createGallery(data.hits);\n\n        const totalPages = Math.ceil(data.totalHits / perPage);\n        if (page >= totalPages) {\n            hideLoadMoreButton(loadMoreBtn);\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topRight',\n            });\n        }\n\n        smoothScroll();\n    } catch (error) {\n        iziToast.error({\n            message: `Error: ${error.message}`,\n            position: 'topRight',\n        });\n    } finally {\n        hideLoader(loaderEl);\n    }\n}\n\nfunction smoothScroll() {\n    const { height: cardHeight } = galleryEl\n        .firstElementChild.getBoundingClientRect();\n\n    window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n    });\n}\n\n\n"],"names":["BASE_URL","API_KEY","getImagesByQuery","query","page","perPage","url","response","galleryEl","lightbox","SimpleLightbox","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","element","hideLoader","showLoadMoreButton","button","hideLoadMoreButton","formEl","loaderEl","loadMoreBtn","onFormSubmit","onLoadMoreClick","event","iziToast","data","error","totalPages","smoothScroll","cardHeight"],"mappings":"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"}